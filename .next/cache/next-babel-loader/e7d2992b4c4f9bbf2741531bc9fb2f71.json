{"ast":null,"code":"import dbConnect from \"./dbConnect\";\n\nconst mongoMiddleware = handler => {\n  return async (req, res) => {\n    const {\n      connection,\n      models\n    } = await dbConnect();\n\n    try {\n      await handler(req, res, connection, models);\n    } catch (e) {\n      connection.close();\n      res.status(500).json({\n        error: e.message || \"something went wrong\"\n      });\n    }\n  };\n};\n\nexport default mongoMiddleware;","map":{"version":3,"sources":["/Users/karsonkrieg/Desktop/JAM-DEV/utils/mongoMiddleware.js"],"names":["dbConnect","mongoMiddleware","handler","req","res","connection","models","e","close","status","json","error","message"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,aAAtB;;AAEA,MAAMC,eAAe,GAAIC,OAAD,IAAa;AACpC,SAAO,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC1B,UAAM;AAAEC,MAAAA,UAAF;AAAcC,MAAAA;AAAd,QAAyB,MAAMN,SAAS,EAA9C;;AACA,QAAI;AACH,YAAME,OAAO,CAACC,GAAD,EAAMC,GAAN,EAAWC,UAAX,EAAuBC,MAAvB,CAAb;AACA,KAFD,CAEE,OAAOC,CAAP,EAAU;AACXF,MAAAA,UAAU,CAACG,KAAX;AACAJ,MAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,QAAAA,KAAK,EAAEJ,CAAC,CAACK,OAAF,IAAa;AAAtB,OAArB;AACA;AACD,GARD;AASA,CAVD;;AAYA,eAAeX,eAAf","sourcesContent":["import dbConnect from \"./dbConnect\";\n\nconst mongoMiddleware = (handler) => {\n\treturn async (req, res) => {\n\t\tconst { connection, models } = await dbConnect();\n\t\ttry {\n\t\t\tawait handler(req, res, connection, models);\n\t\t} catch (e) {\n\t\t\tconnection.close();\n\t\t\tres.status(500).json({ error: e.message || \"something went wrong\" });\n\t\t}\n\t};\n};\n\nexport default mongoMiddleware;\n"]},"metadata":{},"sourceType":"module"}
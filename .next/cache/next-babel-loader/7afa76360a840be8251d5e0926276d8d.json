{"ast":null,"code":"import mongoose from \"mongoose\";\nimport resourceSchema from \"../models/resource\";\nimport userSchema from \"../models/users\";\nconst connection = {};\n\nconst dbConnect = async () => {\n  if (connection.isConnected) {\n    return;\n  }\n\n  try {\n    const db = await mongoose.connect(process.env.MONGODB_URI, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true\n    });\n    const Resource = mongoose.models.Resource || mongoose.model(\"Resource\", resourceSchema);\n    const Users = models.Users || model(\"Users\", userSchema);\n    connection.isConnected = db.connections[0].readyState;\n    connection.models = {\n      Resource,\n      Users\n    };\n    console.log(connection.models.Resource);\n  } catch {\n    return \"Did not connect to Mongo\";\n  }\n};\n\nexport default dbConnect;","map":{"version":3,"sources":["/Users/karsonkrieg/Desktop/JAM-DEV/utils/dbConnect.js"],"names":["mongoose","resourceSchema","userSchema","connection","dbConnect","isConnected","db","connect","process","env","MONGODB_URI","useNewUrlParser","useUnifiedTopology","Resource","models","model","Users","connections","readyState","console","log"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;AACA,OAAOC,cAAP,MAA2B,oBAA3B;AACA,OAAOC,UAAP,MAAuB,iBAAvB;AACA,MAAMC,UAAU,GAAG,EAAnB;;AACA,MAAMC,SAAS,GAAG,YAAY;AAC7B,MAAID,UAAU,CAACE,WAAf,EAA4B;AAC3B;AACA;;AACD,MAAI;AACH,UAAMC,EAAE,GAAG,MAAMN,QAAQ,CAACO,OAAT,CAAiBC,OAAO,CAACC,GAAR,CAAYC,WAA7B,EAA0C;AAC1DC,MAAAA,eAAe,EAAE,IADyC;AAE1DC,MAAAA,kBAAkB,EAAE;AAFsC,KAA1C,CAAjB;AAIA,UAAMC,QAAQ,GAAGb,QAAQ,CAACc,MAAT,CAAgBD,QAAhB,IAA4Bb,QAAQ,CAACe,KAAT,CAAe,UAAf,EAA2Bd,cAA3B,CAA7C;AACA,UAAMe,KAAK,GAAGF,MAAM,CAACE,KAAP,IAAgBD,KAAK,CAAC,OAAD,EAAUb,UAAV,CAAnC;AACAC,IAAAA,UAAU,CAACE,WAAX,GAAyBC,EAAE,CAACW,WAAH,CAAe,CAAf,EAAkBC,UAA3C;AACAf,IAAAA,UAAU,CAACW,MAAX,GAAoB;AACnBD,MAAAA,QADmB;AAEnBG,MAAAA;AAFmB,KAApB;AAIAG,IAAAA,OAAO,CAACC,GAAR,CAAYjB,UAAU,CAACW,MAAX,CAAkBD,QAA9B;AACA,GAbD,CAaE,MAAM;AACP,WAAO,0BAAP;AACA;AACD,CApBD;;AAsBA,eAAeT,SAAf","sourcesContent":["import mongoose from \"mongoose\";\nimport resourceSchema from \"../models/resource\";\nimport userSchema from \"../models/users\";\nconst connection = {};\nconst dbConnect = async () => {\n\tif (connection.isConnected) {\n\t\treturn;\n\t}\n\ttry {\n\t\tconst db = await mongoose.connect(process.env.MONGODB_URI, {\n\t\t\tuseNewUrlParser: true,\n\t\t\tuseUnifiedTopology: true,\n\t\t});\n\t\tconst Resource = mongoose.models.Resource || mongoose.model(\"Resource\", resourceSchema);\n\t\tconst Users = models.Users || model(\"Users\", userSchema);\n\t\tconnection.isConnected = db.connections[0].readyState;\n\t\tconnection.models = {\n\t\t\tResource,\n\t\t\tUsers,\n\t\t};\n\t\tconsole.log(connection.models.Resource);\n\t} catch {\n\t\treturn \"Did not connect to Mongo\";\n\t}\n};\n\nexport default dbConnect;\n"]},"metadata":{},"sourceType":"module"}